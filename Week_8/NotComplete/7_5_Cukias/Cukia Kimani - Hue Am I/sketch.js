// Code by Cukia Kimani, simplified for example purposes by Tegan Bristow as a class demonstaration

var json = {
    "data": [
        {
            "datePosted": [
      2012,
      6,
      17
    ],
            "numPixels": 374544,
            "averageHSB": [
      113,
      167,
      154
    ],
            "fileName": "2012-06-17_1339970553.jpg"
  },
        {
            "datePosted": [
      2012,
      6,
      19
    ],
            "numPixels": 374544,
            "averageHSB": [
      169,
      147,
      85
    ],
            "fileName": "2012-06-19_1340099459.jpg"
  },
        {
            "datePosted": [
      2012,
      6,
      27
    ],
            "numPixels": 374544,
            "averageHSB": [
      110,
      134,
      78
    ],
            "fileName": "2012-06-27_1340785718.jpg"
  },
        {
            "datePosted": [
      2012,
      8,
      3
    ],
            "numPixels": 374544,
            "averageHSB": [
      111,
      209,
      21
    ],
            "fileName": "2012-08-03_1344015863.jpg"
  },
        {
            "datePosted": [
      2012,
      8,
      7
    ],
            "numPixels": 374544,
            "averageHSB": [
      191,
      154,
      74
    ],
            "fileName": "2012-08-07_1344339594.jpg"
  },
        {
            "datePosted": [
      2012,
      8,
      18
    ],
            "numPixels": 374544,
            "averageHSB": [
      114,
      32,
      189
    ],
            "fileName": "2012-08-18_1345293811.jpg"
  },
        {
            "datePosted": [
      2012,
      9,
      6
    ],
            "numPixels": 374544,
            "averageHSB": [
      66,
      146,
      125
    ],
            "fileName": "2012-09-06_1346906645.jpg"
  },
        {
            "datePosted": [
      2012,
      9,
      13
    ],
            "numPixels": 374544,
            "averageHSB": [
      104,
      69,
      104
    ],
            "fileName": "2012-09-13_1347511177.jpg"
  },
        {
            "datePosted": [
      2012,
      9,
      15
    ],
            "numPixels": 374544,
            "averageHSB": [
      0,
      0,
      242
    ],
            "fileName": "2012-09-15_1347731308.jpg"
  },
        {
            "datePosted": [
      2012,
      9,
      22
    ],
            "numPixels": 374544,
            "averageHSB": [
      115,
      101,
      106
    ],
            "fileName": "2012-09-22_1348306970.jpg"
  },
        {
            "datePosted": [
      2012,
      9,
      24
    ],
            "numPixels": 374544,
            "averageHSB": [
      153,
      235,
      15
    ],
            "fileName": "2012-09-24_1348517926.jpg"
  },
        {
            "datePosted": [
      2012,
      10,
      1
    ],
            "numPixels": 374544,
            "averageHSB": [
      51,
      71,
      125
    ],
            "fileName": "2012-10-01_1349081201.jpg"
  },
        {
            "datePosted": [
      2012,
      10,
      11
    ],
            "numPixels": 374544,
            "averageHSB": [
      148,
      165,
      104
    ],
            "fileName": "2012-10-11_1349964749.jpg"
  },
        {
            "datePosted": [
      2012,
      10,
      11
    ],
            "numPixels": 374544,
            "averageHSB": [
      25,
      203,
      93
    ],
            "fileName": "2012-10-11_1349991432.jpg"
  },
        {
            "datePosted": [
      2012,
      10,
      13
    ],
            "numPixels": 374544,
            "averageHSB": [
      68,
      83,
      124
    ],
            "fileName": "2012-10-13_1350125706.jpg"
  },
        {
            "datePosted": [
      2012,
      10,
      17
    ],
            "numPixels": 374544,
            "averageHSB": [
      148,
      136,
      101
    ],
            "fileName": "2012-10-17_1350481874.jpg"
  },
        {
            "datePosted": [
      2012,
      10,
      20
    ],
            "numPixels": 374544,
            "averageHSB": [
      0,
      0,
      244
    ],
            "fileName": "2012-10-20_1350761540.jpg"
  },
        {
            "datePosted": [
      2012,
      10,
      28
    ],
            "numPixels": 374544,
            "averageHSB": [
      65,
      60,
      112
    ],
            "fileName": "2012-10-28_1351421194.jpg"
  },
        {
            "datePosted": [
      2012,
      11,
      3
    ],
            "numPixels": 374544,
            "averageHSB": [
      119,
      146,
      58
    ],
            "fileName": "2012-11-03_1351922813.jpg"
  },
        {
            "datePosted": [
      2012,
      11,
      3
    ],
            "numPixels": 374544,
            "averageHSB": [
      92,
      149,
      26
    ],
            "fileName": "2012-11-03_1351968720.jpg"
  },
        {
            "datePosted": [
      2012,
      11,
      15
    ],
            "numPixels": 374544,
            "averageHSB": [
      103,
      171,
      41
    ],
            "fileName": "2012-11-15_1352982935.jpg"
  },
        {
            "datePosted": [
      2012,
      11,
      17
    ],
            "numPixels": 374544,
            "averageHSB": [
      131,
      132,
      81
    ],
            "fileName": "2012-11-17_1353169701.jpg"
  },
        {
            "datePosted": [
      2012,
      11,
      17
    ],
            "numPixels": 374544,
            "averageHSB": [
      71,
      51,
      124
    ],
            "fileName": "2012-11-17_1353169930.jpg"
  },
        {
            "datePosted": [
      2012,
      11,
      17
    ],
            "numPixels": 374544,
            "averageHSB": [
      80,
      48,
      193
    ],
            "fileName": "2012-11-17_1353170895.jpg"
  },
        {
            "datePosted": [
      2012,
      11,
      23
    ],
            "numPixels": 374544,
            "averageHSB": [
      119,
      79,
      153
    ],
            "fileName": "2012-11-23_1353657119.jpg"
  },
        {
            "datePosted": [
      2012,
      11,
      24
    ],
            "numPixels": 374544,
            "averageHSB": [
      129,
      137,
      145
    ],
            "fileName": "2012-11-24_1353781715.jpg"
  },
        {
            "datePosted": [
      2012,
      11,
      25
    ],
            "numPixels": 374544,
            "averageHSB": [
      122,
      140,
      104
    ],
            "fileName": "2012-11-25_1353816539.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      1
    ],
            "numPixels": 374544,
            "averageHSB": [
      101,
      136,
      69
    ],
            "fileName": "2012-12-01_1354372952.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      2
    ],
            "numPixels": 374544,
            "averageHSB": [
      171,
      36,
      183
    ],
            "fileName": "2012-12-02_1354459277.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      3
    ],
            "numPixels": 374544,
            "averageHSB": [
      112,
      100,
      117
    ],
            "fileName": "2012-12-03_1354505687.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      9
    ],
            "numPixels": 374544,
            "averageHSB": [
      155,
      111,
      87
    ],
            "fileName": "2012-12-09_1355043848.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      9
    ],
            "numPixels": 374544,
            "averageHSB": [
      91,
      31,
      232
    ],
            "fileName": "2012-12-09_1355064043.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      10
    ],
            "numPixels": 374544,
            "averageHSB": [
      118,
      126,
      191
    ],
            "fileName": "2012-12-10_1355166274.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      14
    ],
            "numPixels": 374544,
            "averageHSB": [
      163,
      47,
      134
    ],
            "fileName": "2012-12-14_1355502962.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      17
    ],
            "numPixels": 374544,
            "averageHSB": [
      72,
      124,
      149
    ],
            "fileName": "2012-12-17_1355738987.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      19
    ],
            "numPixels": 374544,
            "averageHSB": [
      54,
      40,
      211
    ],
            "fileName": "2012-12-19_1355924483.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      22
    ],
            "numPixels": 374544,
            "averageHSB": [
      136,
      99,
      85
    ],
            "fileName": "2012-12-22_1356208579.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      25
    ],
            "numPixels": 374544,
            "averageHSB": [
      103,
      70,
      166
    ],
            "fileName": "2012-12-25_1356430753.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      27
    ],
            "numPixels": 374544,
            "averageHSB": [
      128,
      132,
      152
    ],
            "fileName": "2012-12-27_1356641064.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      27
    ],
            "numPixels": 374544,
            "averageHSB": [
      110,
      135,
      117
    ],
            "fileName": "2012-12-27_1356648857.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      29
    ],
            "numPixels": 374544,
            "averageHSB": [
      106,
      35,
      214
    ],
            "fileName": "2012-12-29_1356801416.jpg"
  },
        {
            "datePosted": [
      2012,
      12,
      31
    ],
            "numPixels": 374544,
            "averageHSB": [
      154,
      31,
      150
    ],
            "fileName": "2012-12-31_1356963668.jpg"
  },
        {
            "datePosted": [
      2013,
      1,
      1
    ],
            "numPixels": 374544,
            "averageHSB": [
      136,
      78,
      94
    ],
            "fileName": "2013-01-01_1357034024.jpg"
  },
        {
            "datePosted": [
      2013,
      1,
      13
    ],
            "numPixels": 374544,
            "averageHSB": [
      106,
      157,
      162
    ],
            "fileName": "2013-01-13_1358089168.jpg"
  },
        {
            "datePosted": [
      2013,
      1,
      14
    ],
            "numPixels": 374544,
            "averageHSB": [
      101,
      106,
      164
    ],
            "fileName": "2013-01-14_1358164074.jpg"
  },
        {
            "datePosted": [
      2013,
      1,
      16
    ],
            "numPixels": 374544,
            "averageHSB": [
      129,
      88,
      99
    ],
            "fileName": "2013-01-16_1358340890.jpg"
  },
        {
            "datePosted": [
      2013,
      1,
      20
    ],
            "numPixels": 374544,
            "averageHSB": [
      52,
      106,
      139
    ],
            "fileName": "2013-01-20_1358682261.jpg"
  },
        {
            "datePosted": [
      2013,
      1,
      29
    ],
            "numPixels": 374544,
            "averageHSB": [
      167,
      228,
      35
    ],
            "fileName": "2013-01-29_1359452470.jpg"
  },
        {
            "datePosted": [
      2013,
      1,
      31
    ],
            "numPixels": 374544,
            "averageHSB": [
      114,
      92,
      147
    ],
            "fileName": "2013-01-31_1359620852.jpg"
  },
        {
            "datePosted": [
      2013,
      2,
      4
    ],
            "numPixels": 374544,
            "averageHSB": [
      115,
      176,
      126
    ],
            "fileName": "2013-02-04_1359964722.jpg"
  },
        {
            "datePosted": [
      2013,
      2,
      4
    ],
            "numPixels": 374544,
            "averageHSB": [
      110,
      54,
      137
    ],
            "fileName": "2013-02-04_1359978162.jpg"
  },
        {
            "datePosted": [
      2013,
      2,
      24
    ],
            "numPixels": 374544,
            "averageHSB": [
      55,
      175,
      37
    ],
            "fileName": "2013-02-24_1361701182.jpg"
  },
        {
            "datePosted": [
      2013,
      2,
      25
    ],
            "numPixels": 374544,
            "averageHSB": [
      154,
      48,
      96
    ],
            "fileName": "2013-02-25_1361814958.jpg"
  },
        {
            "datePosted": [
      2013,
      3,
      3
    ],
            "numPixels": 374544,
            "averageHSB": [
      131,
      182,
      75
    ],
            "fileName": "2013-03-03_1362312158.jpg"
  },
        {
            "datePosted": [
      2013,
      3,
      4
    ],
            "numPixels": 374544,
            "averageHSB": [
      124,
      66,
      132
    ],
            "fileName": "2013-03-04_1362414448.jpg"
  },
        {
            "datePosted": [
      2013,
      3,
      4
    ],
            "numPixels": 374544,
            "averageHSB": [
      138,
      80,
      126
    ],
            "fileName": "2013-03-04_1362414646.jpg"
  },
        {
            "datePosted": [
      2013,
      3,
      4
    ],
            "numPixels": 374544,
            "averageHSB": [
      170,
      221,
      116
    ],
            "fileName": "2013-03-04_1362414933.jpg"
  },
        {
            "datePosted": [
      2013,
      3,
      11
    ],
            "numPixels": 374544,
            "averageHSB": [
      93,
      58,
      111
    ],
            "fileName": "2013-03-11_1363026127.jpg"
  },
        {
            "datePosted": [
      2013,
      3,
      13
    ],
            "numPixels": 374544,
            "averageHSB": [
      117,
      147,
      60
    ],
            "fileName": "2013-03-13_1363202738.jpg"
  },
        {
            "datePosted": [
      2013,
      3,
      22
    ],
            "numPixels": 374544,
            "averageHSB": [
      133,
      29,
      163
    ],
            "fileName": "2013-03-22_1363980071.jpg"
  },
        {
            "datePosted": [
      2013,
      3,
      28
    ],
            "numPixels": 374544,
            "averageHSB": [
      163,
      215,
      16
    ],
            "fileName": "2013-03-28_1364450244.jpg"
  },
        {
            "datePosted": [
      2013,
      3,
      31
    ],
            "numPixels": 374544,
            "averageHSB": [
      154,
      9,
      92
    ],
            "fileName": "2013-03-31_1364708021.jpg"
  },
        {
            "datePosted": [
      2013,
      4,
      9
    ],
            "numPixels": 374544,
            "averageHSB": [
      80,
      138,
      142
    ],
            "fileName": "2013-04-09_1365497037.jpg"
  },
        {
            "datePosted": [
      2013,
      4,
      9
    ],
            "numPixels": 374544,
            "averageHSB": [
      118,
      181,
      77
    ],
            "fileName": "2013-04-09_1365497143.jpg"
  },
        {
            "datePosted": [
      2013,
      4,
      9
    ],
            "numPixels": 374544,
            "averageHSB": [
      175,
      73,
      141
    ],
            "fileName": "2013-04-09_1365497254.jpg"
  },
        {
            "datePosted": [
      2013,
      4,
      9
    ],
            "numPixels": 374544,
            "averageHSB": [
      113,
      157,
      99
    ],
            "fileName": "2013-04-09_1365497292.jpg"
  },
        {
            "datePosted": [
      2013,
      4,
      9
    ],
            "numPixels": 374544,
            "averageHSB": [
      130,
      85,
      85
    ],
            "fileName": "2013-04-09_1365497349.jpg"
  },
        {
            "datePosted": [
      2013,
      4,
      11
    ],
            "numPixels": 374544,
            "averageHSB": [
      150,
      205,
      79
    ],
            "fileName": "2013-04-11_1365660060.jpg"
  },
        {
            "datePosted": [
      2013,
      4,
      28
    ],
            "numPixels": 374544,
            "averageHSB": [
      101,
      153,
      110
    ],
            "fileName": "2013-04-28_1367132125.jpg"
  },
        {
            "datePosted": [
      2013,
      4,
      29
    ],
            "numPixels": 374544,
            "averageHSB": [
      178,
      57,
      110
    ],
            "fileName": "2013-04-29_1367254814.jpg"
  },
        {
            "datePosted": [
      2013,
      5,
      4
    ],
            "numPixels": 374544,
            "averageHSB": [
      140,
      99,
      95
    ],
            "fileName": "2013-05-04_1367680180.jpg"
  },
        {
            "datePosted": [
      2013,
      5,
      9
    ],
            "numPixels": 374544,
            "averageHSB": [
      199,
      110,
      94
    ],
            "fileName": "2013-05-09_1368109866.jpg"
  },
        {
            "datePosted": [
      2013,
      5,
      12
    ],
            "numPixels": 374544,
            "averageHSB": [
      54,
      99,
      187
    ],
            "fileName": "2013-05-12_1368359075.jpg"
  },
        {
            "datePosted": [
      2013,
      8,
      11
    ],
            "numPixels": 374544,
            "averageHSB": [
      0,
      0,
      230
    ],
            "fileName": "2013-08-11_1376248020.jpg"
  },
        {
            "datePosted": [
      2013,
      9,
      28
    ],
            "numPixels": 409600,
            "averageHSB": [
      84,
      130,
      85
    ],
            "fileName": "2013-09-28_1380372834.jpg"
  },
        {
            "datePosted": [
      2013,
      11,
      3
    ],
            "numPixels": 409600,
            "averageHSB": [
      147,
      132,
      103
    ],
            "fileName": "2013-11-03_1383480967.jpg"
  },
        {
            "datePosted": [
      2013,
      11,
      12
    ],
            "numPixels": 409600,
            "averageHSB": [
      112,
      45,
      194
    ],
            "fileName": "2013-11-12_1384233836.jpg"
  },
        {
            "datePosted": [
      2013,
      12,
      29
    ],
            "numPixels": 409600,
            "averageHSB": [
      0,
      0,
      11
    ],
            "fileName": "2013-12-29_1388349764.jpg"
  },
        {
            "datePosted": [
      2014,
      2,
      6
    ],
            "numPixels": 409600,
            "averageHSB": [
      195,
      79,
      142
    ],
            "fileName": "2014-02-06_1391673684.jpg"
  },
        {
            "datePosted": [
      2014,
      2,
      14
    ],
            "numPixels": 409600,
            "averageHSB": [
      87,
      1,
      194
    ],
            "fileName": "2014-02-14_1392387649.jpg"
  },
        {
            "datePosted": [
      2014,
      6,
      6
    ],
            "numPixels": 409600,
            "averageHSB": [
      102,
      112,
      124
    ],
            "fileName": "2014-06-06_1402082406.jpg"
  },
        {
            "datePosted": [
      2014,
      6,
      7
    ],
            "numPixels": 409600,
            "averageHSB": [
      114,
      83,
      141
    ],
            "fileName": "2014-06-07_1402162567.jpg"
  },
        {
            "datePosted": [
      2014,
      6,
      8
    ],
            "numPixels": 409600,
            "averageHSB": [
      0,
      0,
      251
    ],
            "fileName": "2014-06-08_1402220816.jpg"
  },
        {
            "datePosted": [
      2014,
      7,
      11
    ],
            "numPixels": 409600,
            "averageHSB": [
      58,
      83,
      199
    ],
            "fileName": "2014-07-11_1405057621.jpg"
  },
        {
            "datePosted": [
      2014,
      7,
      24
    ],
            "numPixels": 409600,
            "averageHSB": [
      119,
      75,
      101
    ],
            "fileName": "2014-07-24_1406220416.jpg"
  },
        {
            "datePosted": [
      2014,
      7,
      30
    ],
            "numPixels": 409600,
            "averageHSB": [
      111,
      45,
      183
    ],
            "fileName": "2014-07-30_1406691111.jpg"
  },
        {
            "datePosted": [
      2014,
      8,
      22
    ],
            "numPixels": 409600,
            "averageHSB": [
      151,
      194,
      67
    ],
            "fileName": "2014-08-22_1408681328.jpg"
  },
        {
            "datePosted": [
      2014,
      9,
      8
    ],
            "numPixels": 409600,
            "averageHSB": [
      109,
      65,
      97
    ],
            "fileName": "2014-09-08_1410158703.jpg"
  },
        {
            "datePosted": [
      2014,
      9,
      9
    ],
            "numPixels": 409600,
            "averageHSB": [
      119,
      64,
      158
    ],
            "fileName": "2014-09-09_1410242454.jpg"
  },
        {
            "datePosted": [
      2014,
      9,
      9
    ],
            "numPixels": 409600,
            "averageHSB": [
      79,
      59,
      134
    ],
            "fileName": "2014-09-09_1410259055.jpg"
  },
        {
            "datePosted": [
      2014,
      10,
      6
    ],
            "numPixels": 409600,
            "averageHSB": [
      162,
      16,
      226
    ],
            "fileName": "2014-10-06_1412608061.jpg"
  },
        {
            "datePosted": [
      2014,
      10,
      23
    ],
            "numPixels": 409600,
            "averageHSB": [
      0,
      0,
      36
    ],
            "fileName": "2014-10-23_1414078520.jpg"
  },
        {
            "datePosted": [
      2014,
      10,
      26
    ],
            "numPixels": 409600,
            "averageHSB": [
      67,
      26,
      170
    ],
            "fileName": "2014-10-26_1414356957.jpg"
  },
        {
            "datePosted": [
      2014,
      10,
      31
    ],
            "numPixels": 409600,
            "averageHSB": [
      134,
      114,
      152
    ],
            "fileName": "2014-10-31_1414738855.jpg"
  },
        {
            "datePosted": [
      2014,
      11,
      2
    ],
            "numPixels": 409600,
            "averageHSB": [
      97,
      36,
      189
    ],
            "fileName": "2014-11-02_1414925779.jpg"
  },
        {
            "datePosted": [
      2014,
      12,
      16
    ],
            "numPixels": 409600,
            "averageHSB": [
      114,
      36,
      159
    ],
            "fileName": "2014-12-16_1418740686.jpg"
  },
        {
            "datePosted": [
      2014,
      12,
      25
    ],
            "numPixels": 409600,
            "averageHSB": [
      115,
      89,
      148
    ],
            "fileName": "2014-12-25_1419509280.jpg"
  },
        {
            "datePosted": [
      2015,
      2,
      8
    ],
            "numPixels": 409600,
            "averageHSB": [
      0,
      0,
      159
    ],
            "fileName": "2015-02-08_1423386208.jpg"
  }
]
};

var photosByYear = []; 

function setup() {
    createCanvas(windowWidth, windowHeight);
    for (var year = 2012; year < 2016; year++) {
        photosByYear[year - 2012] = createYearArray(year);
    }
    noLoop();
};

function draw() {
    colorMode(HSB, 255);
    var backgroundColor = 35;
    background(backgroundColor);

    var numRows = 24;
    var rowSize = windowHeight / numRows;
    
    var x = windowWidth * 0.5;
    var y = rowSize * (numRows - 4) * 0.5;
    var diameter = rowSize * (numRows - 4) < windowWidth ? rowSize * (numRows - 4) : windowWidth;
    var numSections = 18;
    var sectionAngle = TWO_PI / numSections;

    fill(calculateFavoriteHue(json.data), 255, 255);
    rectMode(CENTER);
    stroke(backgroundColor);
    strokeWeight(3);
    rect(x, rowSize * 0.5, diameter, rowSize);

    noStroke();
    fill(backgroundColor);
    textStyle(BOLD);
    textSize(22);
    textAlign(CENTER);
    text("Hue Am I?", x, 0, diameter, rowSize);

    var colorWheelData = [];
    for (var j = 0; j < numSections; j++) {
        colorWheelData[j] = 0;
    }

    for (var p = 0; p < json.data.length; p++) {
        for (var i = 1; i <= numSections; i++) {
            var h = json.data[p].averageHSB[0];
            var a = map(h, 0, 255, 0, TWO_PI);
            if (a > sectionAngle * (i - 1) && a < sectionAngle * i) {
                colorWheelData[i]++;
            }
        }
    }

    var maxHue = 0;
    for (var j = 0; j < numSections; j++) {
        maxHue = colorWheelData[j] > maxHue ? colorWheelData[j] : maxHue;
    }

    for (var i = 1; i <= numSections; i++) {
        var midAngle = (sectionAngle * (i - 1) + sectionAngle * i) * 0.5;
        var hue = map(midAngle, 0, TWO_PI, 0, 255);
        fill(hue, 255, 255);
        var size = diameter * (colorWheelData[i] / maxHue);
        arc(x, y, size, size, sectionAngle * (i - 1), sectionAngle * i, PIE);
    }

    
};

function windowResized() {
    resizeCanvas(windowWidth, windowHeight);
};

function createYearArray(year) {
    var arr = [];
    var arrSize = 0;
    for (var i = 0; i < json.data.length; i++) {
        if (json.data[i].datePosted[0] === year) {
            arr[arrSize] = json.data[i];
            arrSize++;
        }
    }
    return arr;
};

function calculateFavoriteHue(arr) {
    var hue = 0;
    for (var i = 0; i < arr.length; i++) {
        hue += arr[i].averageHSB[0];
    }
    hue /= json.data.length;
    return hue;
};